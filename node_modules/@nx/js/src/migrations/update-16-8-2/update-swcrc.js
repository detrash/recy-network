"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.default = update;
const devkit_1 = require("@nx/devkit");
const path_1 = require("path");
async function update(tree) {
    const projects = (0, devkit_1.getProjects)(tree);
    for (const config of projects.values()) {
        const swcrcPath = (0, path_1.join)(config.root, '.swcrc');
        if (!tree.exists(swcrcPath))
            continue;
        const json = (0, devkit_1.readJson)(tree, swcrcPath);
        // No longer need strict or noInterop for es6 modules
        // See: https://github.com/swc-project/swc/commit/7e8d72d
        if (json.module?.type === 'es6' &&
            (json.module?.strict || json.module?.noInterop)) {
            delete json.module.noInterop;
            delete json.module.strict;
            (0, devkit_1.writeJson)(tree, swcrcPath, json);
        }
    }
    await (0, devkit_1.formatFiles)(tree);
}
