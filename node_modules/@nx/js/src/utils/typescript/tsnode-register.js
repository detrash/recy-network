"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.tsNodeRegister = tsNodeRegister;
function tsNodeRegister(file, tsConfig) {
    if (!file?.endsWith('.ts'))
        return;
    // Register TS compiler lazily
    require('ts-node').register({
        project: tsConfig,
        compilerOptions: {
            module: 'CommonJS',
            types: ['node'],
        },
    });
    if (!tsConfig)
        return;
    // Register paths in tsConfig
    const tsconfigPaths = require('tsconfig-paths');
    const { absoluteBaseUrl: baseUrl, paths } = tsconfigPaths.loadConfig(tsConfig);
    if (baseUrl && paths) {
        tsconfigPaths.register({ baseUrl, paths });
    }
}
