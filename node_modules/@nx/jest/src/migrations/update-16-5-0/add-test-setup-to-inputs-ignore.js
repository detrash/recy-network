"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.addTestSetupToIgnoredInputs = addTestSetupToIgnoredInputs;
const devkit_1 = require("@nx/devkit");
async function addTestSetupToIgnoredInputs(tree) {
    const nxJson = (0, devkit_1.readNxJson)(tree);
    if (!nxJson) {
        return;
    }
    if (nxJson.namedInputs?.production &&
        !nxJson.namedInputs.production.includes('!{projectRoot}/src/test-setup.[jt]s')) {
        nxJson.namedInputs.production.push('!{projectRoot}/src/test-setup.[jt]s');
        (0, devkit_1.updateNxJson)(tree, nxJson);
    }
    await (0, devkit_1.formatFiles)(tree);
}
exports.default = addTestSetupToIgnoredInputs;
